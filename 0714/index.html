<!DOCTYPE html>
<html>
<head>
    <title>目标监测</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <script src="js/echarts.js"></script>
    <link href="css/style.css" rel='stylesheet' type='text/css'/>
    <link href="css/bootstrap.css" rel='stylesheet' type='text/css'/>

    <!--    <link href="css/layui.css " rel='stylesheet' type='text/css'/>-->
    <script src="js/jquery-1.11.0.min.js"></script>
</head>
<body style="height:100%;background-color: rgba(234,255,208,1) ;background-repeat:no-repeat;background-attachment:fixed;background-size:100% 100%; ">

<!--顶部导航栏-->
<div id="home">
    <div class="header">
        <div class="header-left" style=" width: 260px;position: relative;left: -20px">
            <span style="color: rgba(254,185,0,1);font-size: 35px;float: left;font-weight: bolder;font-family: 'Cabin', sans-serif;">多模态目标识别</span>
        </div>
        <img src="images/cgq1.png"
             style="line-height: 70px;width: 70px;text-align: center;float: left;position: absolute;top: -5px;left: 280px">
        <img src="images/cgq2.png"
             style="line-height: 70px;width: 70px;text-align: center;position: absolute;top: -5px;left: 350px">
        <img src="images/cgq3.png"
             style="line-height: 70px;width: 70px;height:auto;text-align: center;position: absolute;top: -5px;left: 420px">
        <img src="images/cgq4.png"
             style="line-height: 70px;width: 60px;height:auto;text-align: center;position: absolute;top: 0px;left: 490px">
        <img src="images/cgq5.png"
             style="line-height: 70px;width: 50px;height:auto;text-align: center;position: absolute;top: 5px;left: 550px">
        <div class="clearfix"></div>
    </div>
</div>
<!--中间内容-->
<!--侧边栏-->
<div class="left" style="float:left;width: 3%">
    <a href="index.html" class="active leftA">
        <img src="images/home.png">
    </a><br>
    <a style="position: absolute;bottom: 70px;left: 5px" href="connect.html" class="leftA">
        <img src="images/connect.png">
    </a>
</div>


<div class="container" style="height: 700px;width: 97%;position: relative;left: 3%">
    <!----左侧边框--->
    <div class="col-md-5 how" style="float: left;width: 42%">
        <div class="col-md-2 how"
             style="height: 650px;position: relative;width: 40%;border-left: 2px dashed #ccc;border-bottom:2px dashed #ccc;border-top: 2px dashed #ccc ">
            <!--        目标检测——士兵-->
            <div class="shan" id="twinkle" style="width: 200px">
                <div id="t1" class="soldier">
                    <img src="images/soldier.png"/>
                </div>
                <div id="t2" class="soldier">
                    <img src="images/soldier.png"/>
                </div>
                <div id="t3" class="soldier">
                    <img src="images/soldier.png"/>
                </div>
            </div>
            <div style=" position: absolute;bottom: 100px;left: 0px;text-align:center;width: 100%;">
                <p id="text1" style="font-size: 20px;font-weight: bold">未检测到目标</p>
            </div>
        </div>
        <div class="col-md-3 how"
             style="height: 650px;width: 60%;border-collapse: collapse;border-right: 2px dashed #ccc;border-bottom:2px dashed #ccc;border-top: 2px dashed #ccc ">
            <!--        信号与基站-->
            <div class="xinhao" style="height: 100%">
                <div class="test" style="padding-top: 100px;">
                    <img src="images/信号.png">
                    <img src="images/信号.png">
                    <img src="images/信号.png">
                    <img src="images/信号.png">
                </div>
                <div style=" position: absolute;bottom: 100px;left: 0px;text-align:center;width: 120px;">
                    <p style="font-size: 20px;font-weight: bold">多模感知节点</p>
                </div>
            </div>
            <div style="display: inline;float: right;padding-top: 250px">
                <img style="width: 200px;padding-left: 40px" src="images/帐篷.png">
                <div style=" position: absolute;bottom: 100px;left: -15px;text-align:center;width: 150%;">
                    <p style="font-size: 20px;font-weight: bold">我方侦查单位示意</p>
                </div>
            </div>
        </div>
    </div>
    <!--目标实时检测结果-->
    <div class="how" style="float: left;width: 55%;height: 100%">
        <div class="how-top"
             style="border-left: #666666 7px solid;border-right: #666666 7px solid;border-collapse: collapse;width: 100%;height: 700px">
            <div class="how-left" style="width: 100%;height: 100%">
                <div style="width: 60%;height: 100%;border-right: #666666 7px solid; float: left">
                    <!--                    目标图像-->
                    <div class="h-1" style="width: 100%;height: 50%">
                        <div class="how-bottom-right" style="width: 100%;height: 100%;display: table-cell">
                            <div style="text-align: center;width: 100%;background-color: rgba(255,238,173,1);height: 10%">
                                <h3 style="color: #333333">目标图像</h3>
                            </div>
                            <div style="width: 100%;height:70%;overflow: hidden">
                                <img src="images/tank.jpg"
                                     style="max-height: 245px;max-width:459px;position: absolute;display: block;">
                            </div>
                            <div style=" float: left;width: 459.13px;height: 70px;">
                                <table class="table8_3" style="width: 100%;">
                                    <tr>
                                        <th>图像识别结果:</th>
                                        <td>大型车辆</td>
                                    </tr>
                                    <tr>
                                        <th>置信度</th>
                                        <td>98.7%</td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                    </div>
                    <!--                    目标声音-->
                    <div class="h-1"
                         style="border-top: #666666 5px solid;width: 100%;height:50%;border-collapse: collapse">
                        <div class="how-bottom-right" style="width: 100%;height: 100%">
                            <div style="text-align: center;width: 100%;background-color:rgba(255,238,173,1);height: 10%">
                                <h3 style="color: #333333">目标声音</h3>
                            </div>
                            <div id="sound" style="width: 100%;height: 70%"></div>
                            <div style="float: left;height: 20%;width: 100%">
                                <table class="table8_3" style="width: 100%;">
                                    <tr>
                                        <th>声音识别结果:</th>
                                        <td id="sound_re"></td>
                                    </tr>
                                    <tr>
                                        <th>置信度</th>
                                        <td id="sound_ra">83.7%</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="float: left;width:40%; height: 100%">
                    <!--                    目标震动-->
                    <div style="width: 100%;height: 50%;">
                        <div style="width: 100%;height: 100%">
                            <div style="width: 100%;height: 100%">
                                <div style="text-align: center;width: 100%;background-color: rgba(255,238,173,1);height:10%">
                                    <h3 style="color: #333333">震动</h3>
                                </div>
                                <div id="shock" style="width: 100%;height: 70%"></div>
                                <div style=" float: left;width: 100%;height: 20%;">
                                    <table class="table8_3" style="width:100%;height: 100%;">
                                        <tr>
                                            <th>震动识别结果:</th>
                                            <td id="wave_re">大型车辆</td>
                                        </tr>
                                        <tr>
                                            <th>置信度</th>
                                            <td id="wave_ra">98.7%</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!--                    目标超声-->
                    <div class="h-1"
                         style="border-top: #666666 5px solid;width: 100%;height:50%;border-collapse: collapse">
                        <div style="width: 100%;height: 100%">
                            <div style="width: 100%;height: 10%">
                                <div style="text-align: center;width: 100%;background-color: rgba(255,238,173,1);height: 100%">
                                    <h3 style="color: #333333">超声波</h3>
                                </div>
                            </div>
                            <div style="width: 100%;height: 60%">
                                <div style="text-align: center;width: 100%;height:100%">
                                    <span>10.00000 m </span>
                                    <span>2022-07-17 13:21</span><br>
                                    <span>10.00000 m </span>
                                    <span>2022-07-17 13:21</span><br>
                                    <span>10.00000 m </span>
                                    <span>2022-07-17 13:21</span><br>
                                    <span>10.00000 m </span>
                                    <span>2022-07-17 13:21</span><br>
                                    <span>10.00000 m </span>
                                    <span>2022-07-17 13:21</span><br>
                                    <span>10.00000 m </span>
                                    <span>2022-07-17 13:21</span><br>
                                    <span>10.00000 m </span>
                                    <span>2022-07-17 13:21</span><br>
                                </div>
                            </div>
                            <div style=" float: left;width: 100%;height: 10%">
                                <table class="table8_3" style="width:100%;height: 20px;">
                                    <tr>
                                        <th>超声传感器识别距离:</th>
                                        <td>10m</td>
                                    </tr>
                                </table>
                            </div>
                            <div style="width: 100%;height: 20%;float: left">
                                <div style=" float: left;height:100%;width: 100%">
                                    <table class="table8_3"
                                           style="width:100%;height: 100%;">
                                        <tr>
                                            <th style="background-color: rgba(243,129,129,1)">综合识别结果:</th>
                                            <td>大型车辆</td>
                                        </tr>
                                        <tr>
                                            <th style="background-color: rgba(243,129,129,1)">置信度</th>
                                            <td>93%</td>
                                        </tr>
                                    </table>
                                    <button class="layui-btn layui-btn-radius layui-btn-normal layui-btn-fluid"
                                            style="opacity: 20%"
                                            onclick="changei()">切换
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--底部导航栏-->
<div id="footer"
     style="background-color:#ffd900;clear:both;position: relative; font-size: 40px; text-align:center;">
    <img style="width: auto;height: 45px;" src="images/littlebeiyou.png">多模态传感器协同的目标智能监测系统
</div>
<!--footer-->
<script>
    var i = 0
    //定时重复
    setInterval(redo, 20)
    setInterval(setsoundre,20)
    //需要定时重复的代码
    function redo() {
        var test = "txt/test.txt"
        lis=eval("(" + readFile(test) + ")")
        JsonToimfo(lis)
    }

    tag()

    function tag() {
        switch (i) {
            case 1: {
                document.getElementById('t1').style.display = "none";
                document.getElementById('t2').style.display = "block";
                document.getElementById('t3').style.display = "none";
                document.getElementById('text1').innerHTML = "小规模目标";
                console.log(document.getElementById('text1'))
                break;
            }
            case 2: {
                document.getElementById('t1').style.display = "block";
                document.getElementById('t2').style.display = "block";
                document.getElementById('t3').style.display = "none";
                document.getElementById('text1').innerHTML = "中等规模目标";
                break;
            }
            case 3: {
                document.getElementById('t1').style.display = "block";
                document.getElementById('t2').style.display = "block";
                document.getElementById('t3').style.display = "block";
                document.getElementById('text1').innerHTML = "大规模目标";
                break;
            }
            default: {
                document.getElementById('t1').style.display = "none";
                document.getElementById('t2').style.display = "none";
                document.getElementById('t3').style.display = "none";
                document.getElementById('text1').innerHTML = "未检测到目标";
                break;
            }
        }
    }

    function changei() {
        i = (i + 1) % 4;
        tag()
        console.log(i);
    }

    //改变检测到目标的图片
    function changeiconurl(url) {
        document.getElementById('t1').setAttribute("src", url);
        document.getElementById('t2').setAttribute("src", url);
        document.getElementById('t3').setAttribute("src", url);
    }

    //将json进行提取
    function JsonToimfo(jsons) {
        var result = jsons['detect_result']
        var conf = result[0]['conf']
        var s_class = result[0]['class']
        console.log(result)
        console.log(conf, s_class)
    }

    //读取目录下的txt
    function readFile(filename) {
        let xhr = new XMLHttpRequest(),
            okStatus = document.location.protocol === "file:" ? 0 : 200;
        xhr.open('GET', filename, false);
        xhr.overrideMimeType("text/html;charset=utf-8");//默认为utf-8
        xhr.send(null);
        return xhr.status === okStatus ? xhr.responseText : null;
    }
    function setsoundre() {
        let jst = readFile('txt/sound_result.txt')
        let json = eval("(" + jst + ")")
        let data = json['data']
        let big = parseFloat( data['big'])
        let medium = parseFloat( data['medium'])
        let no = parseFloat(data['no'])
        let small = parseFloat( data['small'])
        let en = Math.max(big, medium, no,small)
        if(en===big){
            document.getElementById('sound_re').innerHTML='大型目标'
            document.getElementById('sound_ra').innerHTML= big.toString()
        }
        else if(en===medium){
            document.getElementById('sound_re').innerHTML='中型目标'
            document.getElementById('sound_ra').innerHTML= medium.toString()
        }
        else if(en===small){
            document.getElementById('sound_re').innerHTML='小型目标'
            document.getElementById('sound_ra').innerHTML= small.toString()
        }
        else{
            document.getElementById('sound_re').innerHTML='无目标'
            document.getElementById('sound_ra').innerHTML= small.toString()
        }
    }
</script>
<style>
    .xinhao {
        /*display:flex;*/
        width: 30%;
        align-items: center; /*垂直居中*/
        justify-content: center; /*水平居中*/
        float: left;

    }

    .xinhao img {
        height: 100px;
    }


    .soldier {
        width: 30%;
        align-items: center; /*垂直居中*/
        justify-content: center; /*水平居中*/
        float: left;
        padding-top: 180px
    }

    .soldier img {
        height: 170px;
    }

    .shan {
        -webkit-animation: twinkling 1s infinite ease-in-out
    }

    .animated {
        -webkit-animation-duration: 0.1s;
        animation-duration: 0.1s;
        -webkit-animation-fill-mode: both;
        animation-fill-mode: both
    }

    @-webkit-keyframes twinkling {
        0% {
            opacity: 0;
        }
        100% {
            opacity: 1;
        }
    }

    @keyframes twinkling {
        0% {
            opacity: 0;
        }
        100% {
            opacity: 1;
        }
    }
</style>
<script type="text/javascript">
    var dom = document.getElementById('sound');
    var mySound = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};

    var option;

    option = {
        xAxis: {
            type: 'category',
            data: [],
        },
        yAxis: {
            type: 'value',
            min: -20000,
            max: 20000,
            axisLine: {
                show: true,
                symbol: ['none', 'arrow'],
                symbolSize: [5, 10],
                symbolOffset: [5, 10],
            },
            axisTick: {
                show: false,
                boundaryGap: true,
            },
            axisLabel: {
                show: false,
            },
            splitLine: {
                show: false,

            }
        },
        series: [
            {
                data: [745, 2214, 1329, -3887, -7945, -10317, -11105, -7620, -7484, -5627, 1474, 7540, 9285, 13409, 16251, 12821, 8292, 3039, -6560, -11431, -10332, -7695, -8529, -10642, -8932, -5692, 59, 5021, 6546, 3877, 5716, 10781, 13789, 11632, 3857, -2703, -1273, -105, -4411, -10488, -11527, -9455, -4244, -1602, -6761, -6796, 3402, 10863, 10120, 7961, 4675, 3746, 8067, 6808, -2624, -9022, -6743, -2685, -3014, -5245, -4075, -871, 1099, 4978, 6621, 2961, -155, 1468, 2205, -2874, -6722, -5594, -7218, -7342, -1698, 1422, 598, 2908, 5254, 5424, 3502, 1185, -1656, -1672, -512, -1084, 1267, 1633, -3583, -4634, -2050, -1982, -4107, -1647, 1133, 1151, 2157, 1196, -1415, -2334, 3066, 3264, -46, 1749, 2609, 1006, 5000, 6663, 618, -2835, -2667, -4122, -4492, -3154, -4772, -6856, -7332, -3274, 3153, 8323, 6537, 2804, 2311, 1673, 2627, 3973, 452, -6302, -6663, -2940, -1023, -1825, -997, -1316, -1204, 613, 4472, 5125, 8315, 8897, 3430, -4902, -10879, -10378, -6665, -4093, -6296, -3499, 1702, 6339, 8511, 7931, 3672, -313, 682, 3101, 284, -4566, -7285, -8312, -5634, -2114, 1301, 112, -613, -3687, -1809, -808, 383, 80, 1177, 2825, 6089, 12205, 12501, 6296, 1161, -1229, -3112, -2330, 437, 57, -3830, -5506, -7153, -6839, -8191, -5834, -2608, -3164, -2734, 2135, 6635, 5608, 7374, 7789, 7779, 6082, 5707, 2393, -1878, -1713, -516, -1547, -3490, -2756, -1461, 196, 1671, 3761, 921, -1881, -2962, -1552, -285, 1066, 1141, -47, -4518, -7109, -1966, 1716, 1728, 1343, 3946, 3134, 3608, 3453, 4310, 1208, 45, -1664, -4728, -8239, -4938, -34, 64, -3588, -6287, -4889, -1192, 5911, 7439, 4623, 1046, 3435, 5271, 6010, 4011, 1373, -1930, -3685, -1673, -1688, -3073, -4068, -3823, -4243, -2549, -3201, -5437, -6286, -2779, 878, 5251, 5603, 3291, 4102, 7548, 8369, 8436, 7284, 1745, -3676, -6277, -4721, -7455, -9083, -8251, -5365, -3830, -926, 2438, 5002, 6590, 7301, 6736, 4014, 1236, -1377, -4022, -5602, -7045, -8083, -2085, 2736, 3711, 5073, 7087, 5469, 1928, 2396, 776, -2742, -4509, -2360, -6149, -8532, -6601, -4624, -2702, -580, 2045, 5452, 6201, 6543, 7177, 6515, 5477, 3685, -386, -7032, -6784, -2540, -2721, -6575, -5048, -5218, -4984, 1476, 5423, 5215, 1524, -830, -2001, -636, 2345, 4204, 883, -1518, -1083, -767, -1512, 1037, 168, -1643, 333, 1828, 1811, 1386, 973, -2475, -2524, 386, 2092, 928, 1735, 2517, 2026, 894, -1019, -2948, -4436, -3962, 648, 3203, 332, -2115, -2582],
                type: 'line'
            }
        ]
    };

    if (option && typeof option === 'object') {
        mySound.setOption(option);
    }
    window.addEventListener('resize', mySound.resize);
</script>
<script type="text/javascript">
    var dom = document.getElementById('shock');
    var myShock = echarts.init(dom, null, {
        renderer: 'canvas',
        useDirtyRect: false
    });
    var app = {};

    var option;

    option = {
        xAxis: {
            type: 'category',
            data: [],
        },
        yAxis: {
            type: 'value',
            min: -20000,
            max: 20000,
            axisLine: {
                show: true,
                symbol: ['none', 'arrow'],
                symbolSize: [5, 10],
                symbolOffset: [5, 10],
            },
            axisTick: {
                show: false,
                boundaryGap: true,
            },
            axisLabel: {
                show: false,
            },
            splitLine: {
                show: false,

            }
        },
        series: [
            {
                data: [745, 2214, 1329, -3887, -7945, -10317, -11105, -7620, -7484, -5627, 1474, 7540, 9285, 13409, 16251, 12821, 8292, 3039, -6560, -11431, -10332, -7695, -8529, -10642, -8932, -5692, 59, 5021, 6546, 3877, 5716, 10781, 13789, 11632, 3857, -2703, -1273, -105, -4411, -10488, -11527, -9455, -4244, -1602, -6761, -6796, 3402, 10863, 10120, 7961, 4675, 3746, 8067, 6808, -2624, -9022, -6743, -2685, -3014, -5245, -4075, -871, 1099, 4978, 6621, 2961, -155, 1468, 2205, -2874, -6722, -5594, -7218, -7342, -1698, 1422, 598, 2908, 5254, 5424, 3502, 1185, -1656, -1672, -512, -1084, 1267, 1633, -3583, -4634, -2050, -1982, -4107, -1647, 1133, 1151, 2157, 1196, -1415, -2334, 3066, 3264, -46, 1749, 2609, 1006, 5000, 6663, 618, -2835, -2667, -4122, -4492, -3154, -4772, -6856, -7332, -3274, 3153, 8323, 6537, 2804, 2311, 1673, 2627, 3973, 452, -6302, -6663, -2940, -1023, -1825, -997, -1316, -1204, 613, 4472, 5125, 8315, 8897, 3430, -4902, -10879, -10378, -6665, -4093, -6296, -3499, 1702, 6339, 8511, 7931, 3672, -313, 682, 3101, 284, -4566, -7285, -8312, -5634, -2114, 1301, 112, -613, -3687, -1809, -808, 383, 80, 1177, 2825, 6089, 12205, 12501, 6296, 1161, -1229, -3112, -2330, 437, 57, -3830, -5506, -7153, -6839, -8191, -5834, -2608, -3164, -2734, 2135, 6635, 5608, 7374, 7789, 7779, 6082, 5707, 2393, -1878, -1713, -516, -1547, -3490, -2756, -1461, 196, 1671, 3761, 921, -1881, -2962, -1552, -285, 1066, 1141, -47, -4518, -7109, -1966, 1716, 1728, 1343, 3946, 3134, 3608, 3453, 4310, 1208, 45, -1664, -4728, -8239, -4938, -34, 64, -3588, -6287, -4889, -1192, 5911, 7439, 4623, 1046, 3435, 5271, 6010, 4011, 1373, -1930, -3685, -1673, -1688, -3073, -4068, -3823, -4243, -2549, -3201, -5437, -6286, -2779, 878, 5251, 5603, 3291, 4102, 7548, 8369, 8436, 7284, 1745, -3676, -6277, -4721, -7455, -9083, -8251, -5365, -3830, -926, 2438, 5002, 6590, 7301, 6736, 4014, 1236, -1377, -4022, -5602, -7045, -8083, -2085, 2736, 3711, 5073, 7087, 5469, 1928, 2396, 776, -2742, -4509, -2360, -6149, -8532, -6601, -4624, -2702, -580, 2045, 5452, 6201, 6543, 7177, 6515, 5477, 3685, -386, -7032, -6784, -2540, -2721, -6575, -5048, -5218, -4984, 1476, 5423, 5215, 1524, -830, -2001, -636, 2345, 4204, 883, -1518, -1083, -767, -1512, 1037, 168, -1643, 333, 1828, 1811, 1386, 973, -2475, -2524, 386, 2092, 928, 1735, 2517, 2026, 894, -1019, -2948, -4436, -3962, 648, 3203, 332, -2115, -2582],
                type: 'line'
            }
        ]
    };

    if (option && typeof option === 'object') {
        myShock.setOption(option);
    }
    window.addEventListener('resize', myShock.resize);
</script>
<script>
    setTimeout(function () {
        document.getElementsByTagName('body')[0].style.height = window.innerHeight + 'px';
    }, 20);
</script>
</body>
</html>